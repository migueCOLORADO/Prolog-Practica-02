findall(Reference, (vehicle(toyota, Reference, suv, Price, _), Price < 30000), Results).
bagof(Reference, (vehicle(toyota, Reference, suv, Price, _), Price < 30000), Results).

bagof(vehicle(Type, Year, Reference), (vehicle(ford, Reference, Type, _, Year)), GroupedVehicles).


findall(Price, (vehicle(_, _, sedan, Price, _)), SedanPrices),aggregate_all(sum(Price), member(Price, SedanPrices), TotalValue),(TotalValue =< 500000 -> FinalTotal = TotalValue ; FinalTotal = 500000).